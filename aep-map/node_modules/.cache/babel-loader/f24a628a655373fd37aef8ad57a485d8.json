{"ast":null,"code":"import v4 from \"uuid\";\nimport TileLayer from 'ol/layer/Tile';\nimport XYZ from 'ol/source/XYZ';\nconst AEP_INITALIZE_START = 'AEP_INITALIZE_START';\nconst AEP_INITALIZE_END = 'AEP_INITALIZE_END';\nconst MAP_INITIALIZED = 'MAP_INITIALIZED';\nconst apiHost = process.env.REACT_APP_APIHOST_AEP;\n\nconst getBundle = function () {\n  return {\n    name: 'aep',\n    getReducer: () => {\n      const initialData = {\n        _shouldInitialize: false\n      };\n      return (state = initialData, {\n        type,\n        payload\n      }) => {\n        switch (type) {\n          case AEP_INITALIZE_START:\n          case AEP_INITALIZE_END:\n            return Object.assign({}, state, payload);\n\n          case MAP_INITIALIZED:\n            return Object.assign({}, state, {\n              _shouldInitialize: true\n            });\n\n          default:\n            return state;\n        }\n      };\n    },\n    doAepInitialize: () => ({\n      dispatch,\n      store,\n      anonGet\n    }) => {\n      dispatch({\n        type: AEP_INITALIZE_START,\n        payload: {\n          _shouldInitialize: false\n        }\n      });\n      initMap(store);\n    },\n    reactAepShouldInitialize: state => {\n      if (state.aep._shouldInitialize) return {\n        actionCreator: \"doAepInitialize\"\n      };\n    }\n  };\n};\n\nexport { getBundle as default };\nconst layers = [{\n  name: \"AEP Grids DC Pluvial\",\n  url: \"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Adc_p@EPSG%3A900913@png/{z}/{x}/{-y}.png\"\n}, {\n  name: \"AEP Grids Harrison Pluvial\",\n  url: \"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Aharrison_p@EPSG%3A900913@png\"\n}, {\n  name: \"AEP Grids Brentwood Pluvial\",\n  url: \"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Abrentwood_p@EPSG%3A900913@png\"\n}, {\n  name: \"AEP Grids Highland Park Pluvial\",\n  url: \"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Ahighlandpark_p@EPSG%3A900913@png\"\n}];\n\nconst initMap = function (store) {\n  const map = store.selectMap();\n  const parentUid = store.selectTreeViewRootId();\n  layers.forEach(layer => {\n    let wms = new TileLayer({\n      source: new XYZ({\n        url: layer.url\n      })\n    });\n    const uid = v4();\n    store.doAddLayer({\n      uid: uid,\n      displayName: layer.name,\n      parentUid: parentUid,\n      mapLayer: wms,\n      serviceType: \"TMS\",\n      visible: true,\n      zoomTo: false\n    });\n  });\n};","map":{"version":3,"sources":["C:/Examples/aepmap/aep-map/src/cm3-plugins/aep/cm3-aep-bundle.js"],"names":["v4","TileLayer","XYZ","AEP_INITALIZE_START","AEP_INITALIZE_END","MAP_INITIALIZED","apiHost","process","env","REACT_APP_APIHOST_AEP","getBundle","name","getReducer","initialData","_shouldInitialize","state","type","payload","Object","assign","doAepInitialize","dispatch","store","anonGet","initMap","reactAepShouldInitialize","aep","actionCreator","default","layers","url","map","selectMap","parentUid","selectTreeViewRootId","forEach","layer","wms","source","uid","doAddLayer","displayName","mapLayer","serviceType","visible","zoomTo"],"mappings":"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","sourcesContent":["import v4 from \"uuid\";\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport XYZ from 'ol/source/XYZ';\r\n\r\nconst AEP_INITALIZE_START='AEP_INITALIZE_START';\r\nconst AEP_INITALIZE_END='AEP_INITALIZE_END';\r\nconst MAP_INITIALIZED='MAP_INITIALIZED';\r\nconst apiHost=process.env.REACT_APP_APIHOST_AEP\r\n\r\nconst getBundle=function(){\r\n  return({\r\n    name:'aep',\r\n    getReducer: () => {\r\n      const initialData = {\r\n        _shouldInitialize: false,\r\n      };\r\n      return (state = initialData, { type, payload }) => {\r\n        switch(type){\r\n          case AEP_INITALIZE_START:\r\n          case AEP_INITALIZE_END:\r\n            return Object.assign({}, state, payload);\r\n          case MAP_INITIALIZED:\r\n            return Object.assign({}, state, {\r\n              _shouldInitialize: true\r\n            })\r\n          default:\r\n            return state;\r\n        }\r\n      }\r\n    },\r\n    doAepInitialize: () => ({ dispatch, store, anonGet }) => {\r\n      dispatch({\r\n        type: AEP_INITALIZE_START,\r\n        payload: {\r\n          _shouldInitialize: false,\r\n        }\r\n      })\r\n      initMap(store);      \r\n    },\r\n    reactAepShouldInitialize: (state) => {\r\n      if(state.aep._shouldInitialize) return { actionCreator: \"doAepInitialize\" };\r\n    }\r\n  })\r\n}\r\n\r\nexport {getBundle as default}\r\n\r\nconst layers = [\r\n  {\r\n    name:\"AEP Grids DC Pluvial\",\r\n    url:\"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Adc_p@EPSG%3A900913@png/{z}/{x}/{-y}.png\"\r\n  },\r\n  {\r\n    name:\"AEP Grids Harrison Pluvial\",\r\n    url:\"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Aharrison_p@EPSG%3A900913@png\"\r\n  },\r\n  {\r\n    name:\"AEP Grids Brentwood Pluvial\",\r\n    url:\"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Abrentwood_p@EPSG%3A900913@png\"\r\n  },\r\n  {\r\n    name:\"AEP Grids Highland Park Pluvial\",\r\n    url:\"https://ec2-34-227-135-215.compute-1.amazonaws.com/geoserver/gwc/service/tms/1.0.0/ml%3Ahighlandpark_p@EPSG%3A900913@png\"\r\n  },\r\n]\r\n\r\nconst initMap=function(store){\r\n    const map = store.selectMap();\r\n    const parentUid = store.selectTreeViewRootId();\r\n    layers.forEach((layer)=>{\r\n      let wms = new TileLayer({\r\n        source: new XYZ({\r\n          url:layer.url,\r\n        }),\r\n      })\r\n      \r\n      const uid = v4();\r\n      store.doAddLayer({\r\n        uid: uid,\r\n        displayName: layer.name,\r\n        parentUid: parentUid,\r\n        mapLayer: wms,\r\n        serviceType: \"TMS\",\r\n        visible: true,\r\n        zoomTo: false,\r\n      });      \r\n    });\r\n\r\n}"]},"metadata":{},"sourceType":"module"}